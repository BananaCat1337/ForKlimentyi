## Правила и регламент

- [Экзамен: правила, рекомендации и порядок проведения](https://hexly.notion.site/d9289c18871c44508bc7c7f05a51d94f)

## Задание

Ваша задача написать валидатор, в котором есть ряд методов и свойств и экспортировать его по умолчанию из файла *index.js*. Валидатор позволяет проверять аргументы на соответствие необходимым условиям, которые были заданы с помощью методов валидатора. Запуск валидатора происходит в конце задачи, с помощью метода `isValid()`.

Пример использования:

```javascript
// создаем экземпляр валидатора
const v = new Validator();
// определяем метод для валидации строк и связываем его с валидатором, обращаясь к нему через переменную.
const schema = v.string();

// проверяем данные на соответствие строковому типу, с помощью метода isValid()
schema.isValid(null); // false
schema.isValid(''); // true
schema.isValid(123); // false
```

### Примечания

Вы можете самостоятельно протестировать работу валидатора. В каталоге *src* разрешено использовать любые файлы, только с расширением **js** и создавать новые, если это делает вашу разработку более удобной.

Для тестирования валидатора, достаточно создать экземпляр валидатора, настроить валидацию с помощью методов и вызвать метод `validate()` с необходимым аргументом, после чего написать в терминале:

```bash
node index.js
```

## 1 задача

Вам необходимо создать валидатор, который способен принимать аргумент и проводить его проверку на соответствие определенным условиям. В данной задаче мы ограничиваемся валидацией только IP-адресов. Для этого в вашем валидаторе должен быть метод `ipAddress()`, который создает экземпляр валидатора IP-адреса. Этот экземпляр обладает методом `isValid()`, который принимает данные на вход и возвращает значение *true* или *false* в зависимости от того, являются ли входные данные действительным IP-адресом или нет.

**Условия**

- Валидный адрес начинается с числа "27"

**Методы и аргументы**

- Аргумент, который мы валидируем (проверяем)
- Метод валидатора `ipAddress()`, который создает экземпляр валидатора IP-адреса
- Метод `isValid()`, который вызывается у экземпляра `ipAddress()`. Он проверяет, является ли входной аргумент действительным IP-адресом

```javascript
const v = new Validator();
const ipAddressSchema = v.ipAddress();

ipAddressSchema.isValid('27.168.0.1'); // true
ipAddressSchema.isValid('27.0.0.1'); // true
ipAddressSchema.isValid('172.16.0.1'); // false
ipAddressSchema.isValid('8.8.8.8'); // false
ipAddressSchema.isValid('invalid-ip-address'); // false
ipAddressSchema.isValid('256.0.0.1'); // false
```

После добавления метода `ipAddress()`, экземпляр валидатора сможет проверять, является ли входной аргумент действительным IP-адресом.

## 2 задача

Вам необходимо расширить функциональность экземпляра валидатора IP-адресов, добавив к нему метод `setIpAddressLengthConstraint()`. Этот метод принимает один обязательный аргумент - минимальную длину IP-адреса, а также один необязательный аргумент - максимальную длину IP-адреса. При вызове метода `setIpAddressLengthConstraint()`, он добавляет дополнительную проверку, которая будет выполняться при вызове метода `isValid()`.

**Условия**

- Валидируется все после числа *27*


**Методы**

- Метод `setIpAddressLengthConstraint()`, который вызывается у экземпляра `ipAddress()`. Он добавляет еще одну проверку

```javascript
const v = new Validator();

const ipAddressSchema1 = v.ipAddress();
ipAddressSchema1.isValid('27.168.0.1'); // true

const ipAddressSchema2 = v.ipAddress().setIpAddressLengthConstraint(8);
ipAddressSchema2.isValid('27.0.0.1.4'); // true
ipAddressSchema2.isValid('192.168'); // false

const ipAddressSchema3 = v.ipAddress().setIpAddressLengthConstraint(4, 6);
ipAddressSchema3.isValid('27.16.0.55'); // true
ipAddressSchema3.isValid('8.8.8.8'); // false
```

После добавления метода `setIpAddressLengthConstraint()`, экземпляр валидатора IP-адресов будет проверять, чтобы входной IP-адрес начинался с указанного префикса.

## 3 задача

Вам необходимо создать валидатор для проверки даты рождения пользователя. Валидатор должен иметь метод `birthday()`, который создает экземпляр валидатора даты рождения. У созданного экземпляра должен быть метод `isValid()`, который проверяет, является ли переданная дата рождения допустимой.

**Методы**

- Метод `birthday()`, который создает экземпляр валидатора даты рождения
- Метод `isValid()`, который вызывается у экземпляра `birthday()`. Он проверяет, является ли переданная дата рождения допустимой.

**Условия**

- Если на вход приходит не дата, то возвращаем false
- Если дата рождения находится в прошлом, то она допустимая, возвращаем true
- Если дата рождения находится в будущем, то она недопустимая, возвращаем false

```javascript
const v = new Validator();
const birthdayValidator = v.birthday();

birthdayValidator.isValid(new Date('1990-01-01')); // true
birthdayValidator.isValid('1990-01-01'); // false
birthdayValidator.isValid(new Date('2100-01-01')); // false
birthdayValidator.isValid(new Date()); // true (текущая дата)
```

После добавления метода `birthday()`, экземпляр валидатора сможет проверять, является ли переданная дата рождения допустимой.

## 4 задача

Вам необходимо расширить функциональность экземпляра валидатора даты рождения. Кроме того, что он может валидировать, является ли переданная дата рождения допустимой, он должен также иметь возможность проверять, является ли возраст пользователя взрослым, если был вызван метод `setAdultValidator()`.

Возраст считается взрослым, если он больше или равен 18 лет

**Методы**

- Метод `setAdultValidator()`, который вызывается у экземпляра `birthday()`. Он проверяет, является ли возраст пользователя взрослым.

```javascript
const v = new Validator();
const birthdayValidator1 = v.birthday();

birthdayValidator1.isValid(new Date('2000-01-01')); // true

const birthdayValidator2 = v.birthday().setAdultValidator();
birthdayValidator2.isValid(new Date('2000-01-01')); // true
birthdayValidator2.isValid(new Date('2010-01-01')); // false
```

После добавления метода `setAdultValidator()`, экземпляр валидатора даты рождения будет способен проверять, является ли возраст пользователя взрослым.

## 5 задача

Вам необходимо создать валидатор полей пользователя, используя методы, представленные в предыдущих задачах. Для этого необходимо создать метод `user()`, который проверяет не сам объект, а данные внутри него на соответствие заданным валидаторам. Метод `Validator.user()` должен содержать метод `shape()`, позволяющий задать поля, подлежащие валидации, для пользователя. Метод `shape()` принимает объект, ключи которого представляют поля, требующие проверки, а значения - экземпляры валидаторов.

**Методы**

- Метод валидатора (экземпляр класса *Validator*) `user()`, который проверяет данные внутри объекта (поля объекта)
- Метод `shape()`, который вызывается у экземпляра `user()`. Он позволяет задать поля валидации для объекта

```javascript
const v = new Validator();

// Позволяет описывать валидацию для свойств пользователя
const userSchema = v.user().shape({
  ipAddress: v.ipAddress().setIpAddressLengthConstraint(7),
  birthday: v.birthday().setAdultValidator(),
});

userSchema.isValid({
  ipAddress: '27.0.0.1.4',
  birthday: new Date('2000-01-01'),
}); // true

userSchema.isValid({
  ipAddress: '30.0.0.1',
  birthday: 2023-01-01,
}); // false
```

После добавления методов `user()` и `shape()`, экземпляр валидатора сможет проверять поля пользователя на соответствие заданным валидаторам.
